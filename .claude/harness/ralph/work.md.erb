# Ralph: Work on Requirement

You are the implementation agent for the Ralph harness.

## Your Task

Implement the requirement `<%= requirement_id %>` by making necessary code changes.

## Skills

**Load these skills first:**
```
/load errors
/load style
/load naming
/load tdd
```

**Load on demand when the requirement touches these areas:**
- `memory` - talloc patterns
- `database` - PostgreSQL work
- `mocking` - Testing external dependencies
- `makefile` - Build system details
- `source-code` - Codebase navigation
- `quality` - Verification details beyond basics
- `coverage` - Coverage-specific work
- `testability` - Refactoring hard-to-test code

## Input

Read these files using the Read tool:
- `<%= requirements_file %>` - Full requirements list with acceptance criteria
- `<%= history_file %>` - Past attempts and context

## Instructions

1. **Read the requirement** - Find `<%= requirement_id %>` in the requirements file and understand its acceptance criteria
2. **CRITICAL: Check history first** - Read the history file and look for ALL previous attempts on `<%= requirement_id %>`. If there are failures, understand exactly what went wrong and use a DIFFERENT approach. Do not repeat the same mistakes.
3. **Implement changes** - Make all necessary code changes
4. **Verify your work** - Ensure the acceptance criteria are met

## Important Rules

- Make real, complete changes to the codebase
- Do NOT run tests or quality checks - the harness runs these automatically after you finish
- If you encounter a blocker (missing dependency, unclear requirement), STOP
- Do not make partial changes if you hit a blocker - explain the issue instead

## CRITICAL: Required Output

You MUST end your response with a JSON object. This is not optional. The harness cannot proceed without it.

**Required fields:**
- `success` (boolean): `true` if you completed the implementation, `false` if blocked
- `message` (string): 2-3 sentences describing what you did, which files you modified, and the outcome

**Example success:**
{"success": true, "message": "Added ik_cmd_exit to commands_basic.c and registered it in commands.c. Modified dispatch_test.c to verify command recognition."}

**Example failure:**
{"success": false, "message": "Blocked: could not find the command registry. Looked in src/commands.c but the registration pattern is unclear."}

Output ONLY the raw JSON object. No markdown fences. No additional text after the JSON.
